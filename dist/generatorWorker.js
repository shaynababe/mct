!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.openmct=t():e.openmct=t()}(this,(()=>(function(){var e={subscribe:function(e){var s=e.data,u=Date.now(),c=1e3/s.dataRateInHz,f=u-u%c+c;let m;m=s.spectra?function(t){for(;f<t;){const t=Object.create(e);e.data.start=f-6e4,e.data.end=f,a(t),f+=c}return f}:function(t){for(;f<t;)self.postMessage({id:e.id,data:{name:s.name,utc:f,yesterday:f-864e5,sin:i(f,s.period,s.amplitude,s.offset,s.phase,s.randomness,s.infinityValues),wavelengths:r(),intensities:d(),cos:o(f,s.period,s.amplitude,s.offset,s.phase,s.randomness,s.infinityValues)}}),f+=c;return f},t[e.id]=m,n()},unsubscribe:function(e){delete t[e.data.id]},request:a},t={};function n(e){var a=Date.now(),s=Math.min.apply(Math,Object.values(t).map((function(e){return e(a)})))-a;s<0&&(s=0),Number.isFinite(s)&&setTimeout(n,s)}function a(e){var t=e.data;void 0===t.end&&(t.end=Date.now()),void 0===t.start&&(t.start=t.end-9e5);for(var n=Date.now(),a=t.start,u=t.end>n?n:t.end,c=t.amplitude,f=t.period,m=t.offset,p=t.dataRateInHz,l=t.phase,h=t.randomness,g=Math.max(t.loadDelay,0),M=t.infinityValues,y=1e3/p,I=a-a%y+y,v=[];I<u&&v.length<5e3;I+=y)v.push({utc:I,yesterday:I-864e5,sin:i(I,f,c,m,l,h,M),wavelengths:r(),intensities:d(),cos:o(I,f,c,m,l,h,M)});0===g?s(e,t,v):setTimeout((()=>s(e,t,v)),g)}function s(e,t,n){self.postMessage({id:e.id,data:t.spectra?{wavelength:n.map((e=>e.wavelength)),cos:n.map((e=>e.cos))}:n})}function o(e,t,n,a,s,o,i){return i&&Math.random()>.5?Number.POSITIVE_INFINITY:n*Math.cos(s+e/t/1e3*Math.PI*2)+n*Math.random()*o+a}function i(e,t,n,a,s,o,i){return i&&Math.random()>.5?Number.POSITIVE_INFINITY:n*Math.sin(s+e/t/1e3*Math.PI*2)+n*Math.random()*o+a}function r(){let e=[];for(;e.length<5;){const t=100*Math.random();e.includes(t)||e.push(String(t))}return e}function d(){let e=[];for(;e.length<5;){const t=10*Math.random();e.includes(t)||e.push(String(t))}return e}function u(e,t){self.postMessage({error:e.name+": "+e.message,message:t,id:t.id})}self.onmessage=function(t){var n=t.data,a=e[n.request];if(a)try{a(n)}catch(e){u(e,n)}else u(new Error("unknown message type"),n)}}(),{})));
//# sourceMappingURL=generatorWorker.js.map