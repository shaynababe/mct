!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.openmct=e():t.openmct=e()}(this,(()=>(function(){const t={},e={},s={};self.onconnect=function(n){const o=n.ports[0];o.onmessage=function(n){const r=n.data.request;if("index"===r)!function(n,o){const r={type:o.type,name:o.name,keyString:n};o&&"annotation"===o.type?(o.targets&&function(t,s){Object.keys(s.targets).forEach((n=>{e[n]||(e[n]=[]),t.targets=s.targets,t.tags=s.tags,e[n].some((e=>e.keyString===t.keyString))||e[n].push(t)}))}(r,o),o.tags&&function(t,e,n){n.tags.forEach((t=>{s[t]||(s[t]=[]),s[t].some((t=>t.keyString===e.keyString))||s[t].push(e)}));Object.keys(s).filter((t=>!n.tags.includes(t))).forEach((e=>{s[e]=s[e].filter((e=>e.keyString!==t))}))}(n,r,o)):t[n]=r}(n.data.keyString,n.data.model);else if("OBJECTS"===r)o.postMessage(function(e){let s=[];const n=e.input.trim().toLowerCase(),o={request:"searchForObjects",results:[],total:0,queryId:e.queryId};return s=Object.values(t).filter((t=>t.name.toLowerCase().includes(n)))||[],o.total=s.length,o.results=s.slice(0,e.maxResults),o}(n.data));else if("ANNOTATIONS"===r)o.postMessage(function(t){let s=[];const n={request:"searchForAnnotations",results:[],total:0,queryId:t.queryId};return s=e[t.input]||[],n.total=s.length,n.results=s.slice(0,t.maxResults),n}(n.data));else{if("TAGS"!==r)throw new Error(`Unknown request ${n.data.request}`);o.postMessage(function(t){let e=[];const n={request:"searchForTags",results:[],total:0,queryId:t.queryId};return t.input&&t.input.forEach((t=>{const n=s[t];n&&n.forEach((t=>{e.some((e=>t.keyString===e.keyString))||e.push(t)}))})),n.total=e.length,n.results=e.slice(0,t.maxResults),n}(n.data))}},o.start()},self.onerror=function(t){console.error("Error on feed",t)}}(),{})));
//# sourceMappingURL=inMemorySearchWorker.js.map